<!-- 
======================================
; Title: Assignment 3.2 - Restaurant App
; Author: Professor Krasso
; Date: 16 Jan 2023
; Modified By: Chris Gorham
; Description: This code is for Restaurant App HTML & JavaScript
; Sources Used: 
; Web 330 HTML, CSS, and JavaScript Requirements Word Document
; W3 Schools CSS Grids, URL: https://www.w3schools.com/css/css_grid.asp
=====================================
-->

<!DOCTYPE html>
<html lang="en">

<head>

        <meta charset="UTF-8">
        <title>WEB 330 - Enterprise JavaScript II</title>


        <link rel="stylesheet" type="text/css" href="../theme.css">
        <link rel="stylesheet" type="text/css" href="../site.css">
        <link rel="stylesheet" type="text/css" href="restaurant.css">

        <!-- Google Font Set (Oswald) for WEB 330-->
        <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;700&display=swap" rel="stylesheet">


        <!--- Font Awesome CDN-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <!---The JavaScript source doe for the theme functions setDefaultTheme and setSelectedTheme-->
        <script src="../theme.js"></script>

</head>


<body class="light-theme">
            <!-- Creates the icon and adds the onclick functionality for changing between themes-->
            <i onclick="toggleMode(this)" id="icon-mode" class="fa fa-toggle-off pull-right" style="font-size: 28px;"><span id="icon-text"></span></i><br>

    <div id="assign-container">

        <h1 class="app-header">Welcome to the Restaurant App!</h1>

        <div class="assign-content">
            <div class="card">

                <div class="card-title">Restaurant Menu</div><br>
                
                <div class="grid-container">
                  
                  <!-- Card for the Beverages-->
                  <div class="card">
                    <div class="card-title">Beverages</div>
                    <div class="card-content" id="beverages">
                      <label for="soda">
                        <input type="checkbox" id="soda" name="soda" value="3.30">Soda ($3.30)</label><br>
                    <label for="tea">
                        <input type="checkbox" id="tea" name="tea" value="3.19">Sweet Tea ($3.19)</label><br>
                    <label for="coffee">
                        <input type="checkbox" id="coffee" name="coffee" value="2.29">Hot Coffee ($1.29)</label><br>
                    <label for="water">
                        <input type="checkbox" id="water" name="water" value="1.99">Bottled Water ($1.99)</label><br>
                    </div>
                  </div>

                  <!-- Card for the Appetizers-->
                  <div class="card">
                    <div class="card-title">Appetizers</div>
                    <div class="card-content" id="appetizers">
                    <label for="mozzerela-sticks">
                      <input type="checkbox" id="mozzerela-sticks" name="mozzerela-sticks" value="4.99">Mozzerela Sticks ($4.99)</label><br>
                  <label for="jalapeno-poppers">
                      <input type="checkbox" id="jalapeno-poppers" name="jalapeno-poppers" value="3.50">Jalapeno Poppers ($3.50)</label><br>
                  <label for="nachos">
                      <input type="checkbox" id="nachos" name="nachos" value="6.99">Nachos ($6.99)</label><br>
                  <label for="spinach-dip">
                      <input type="checkbox" id="spinach-dip" name="spinach-dip" value="8.25">Spinach Dip ($7.99)</label><br>
                    </div>
                  </div>

                  <!-- Card for the Main Courses-->
                  <div class="card">
                    <div class="card-title">Main Courses</div>
                    <div class="card-content" id="main-courses">
                      <label for="steak">
                        <input type="checkbox" id="steak" name="steak" value="10.99">Salisbury Steak ($10.99)</label><br>
                    <label for="chicken">
                        <input type="checkbox" id="chicken" name="chicken" value="13.99">Baked Chicken ($13.99)</label><br>
                    <label for="tilapia">
                        <input type="checkbox" id="tilapia" name="tilapia" value="16.99">Fried Tilapia ($16.99)</label><br>
                    <label for="grilled-cheese">
                        <input type="checkbox" id="grilled-cheese" name="grilled-cheese" value="9.99">Grilled Cheese ($9.99)</label><br>
                    </div>
                  </div>

                  <!-- Card for the Desserts-->
                  <div class="card">
                    <div class="card-title">Desserts</div>
                    <div class="card-content" id="desserts">
                      <label for="cheese-cake">
                        <input type="checkbox" id="cheese-cake" name="cheese-cake" value="7.99">Cheese Cake ($7.99)</label><br>
                    <label for="ice-cream-sundae">
                        <input type="checkbox" id="ice-cream-sundae" name="ice-cream-sundae" value="6.99">Ice Cream Sundae ($6.99)</label><br>
                    <label for="funnel-cake">
                        <input type="checkbox" id="funnel-cake" name="funnel-cake" value="5.99">Funnel Cake ($5.99)</label><br>
                        <div class="form-field">
                          <button class="btn btn-primary full-width" id="btnOrder">Place Order</button>
                      </div>
                    </div>
                  </div>



                </div>

                          
                    </div>
                </div>
                </div>
    

        <!-- return home link !-->
        <div class="assign-content">
                <a href="../index.html">Return</a>
        </div>
                
                

        <!-- Results Card-->
        <div class="assign-content">
            <div class="card">
                <div class="card-title">Order Summary</div>
                <div id="assign-results-header"></div>
                <div class="card-content assign-results-text" id="order-total"></div>
            </div>
        </div>    




    </div>

        <script type="module">

        // sets a default theme; this code needs to be first
        setDefaultTheme();
    
        // the function which will toggle between the two different themes
        function toggleMode(x) {
          let colorTheme = document.body.classList; // establishes the variable that holds the body CSS class
          let iconMode = x.classList; // gets the classes 

          // if the value shows light, update the preference in storage
          if (colorTheme.value === "light-theme")
          {
            localStorage.clear();
            localStorage.setItem("mode", "dark-theme");
            localStorage.setItem("iconMode", "fa-toggle-on");
            localStorage.setItem("iconText", "Dark Mode");
          }
        
          else
          {
            localStorage.clear();
            localStorage.setItem("mode", "light-theme");
            localStorage.setItem("iconMode", "fa-toggle-off");
            localStorage.setItem("iconText", "Light Mode");
          }

          // applies the updated theme selection
          colorTheme.value = localStorage.getItem("mode");
          iconMode.value = `fa ${localStorage.getItem("iconMode")} pull-right`;
          document.getElementById("icon-text").innerHTML = localStorage.getItem("iconText");
        }

        import { Bill, Beverage, Appetizer, MainCourse, Dessert } from "./index.js";//importing the single index file

        document.getElementById("btnOrder").onclick = function() {
 
            //Assigning the variables to their correct labels from the html id's
            const beveragesEl = document.getElementById("beverages")
            const beverages = beveragesEl.getElementsByTagName('input');

            const appetizersEl = document.getElementById("appetizers")
            const appetizers = appetizersEl.getElementsByTagName('input');

            const mainCoursesEl = document.getElementById("main-courses")
            const mainCourses = mainCoursesEl.getElementsByTagName('input');

            const dessertsEl = document.getElementById("desserts")
            const desserts = dessertsEl.getElementsByTagName('input');

            //new class of Bill
            let bill = new Bill();

            //Loops for the item selected which goes through bills.js to calc as well as assign the name and values
            for (let beverage of beverages) {
                if (beverage.checked) {
                    bill.addBeverage(new Beverage(beverage.name, beverage.value))
                }
            };

            for (let appetizer of appetizers) {
                if (appetizer.checked) {
                    bill.addAppetizer(new Appetizer(appetizer.name, appetizer.value))
                }
            };

            for (let mainCourse of mainCourses) {
                if (mainCourse.checked) {
                    bill.addMainCourse(new MainCourse(mainCourse.name, mainCourse.value))
                }
            };

            for (let dessert of desserts) {
                if (dessert.checked) {
                    bill.addDessert(new Dessert(dessert.name, dessert.value))
                }
            };

            document.getElementById('order-total').innerHTML = `Your order total is ${bill.getTotal().toFixed(2)}`;//results to results card

        }

        </script>

</body>


</html>